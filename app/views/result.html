<div id="results_and_analysis_parent" ng-cloak>
  <div id="result_top_bar">
    <div id="state_title">Results and Analysis</div>
    <button id="back_button" class="btn btn-danger" ng-click="goBack()"><span class="glyphicon glyphicon-log-out"> Back</span></button>
  </div>
  <!-- End info bar  -->
  <div id="result_area">
    <div id="result_area_controls">
      <div class="dropdown">
        <button class="btn btn-primary dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" aria-haspopup="true"
          aria-expanded="true">
          Select Attempt <span class="caret"></span>
        </button>
        <ul class="dropdown-menu attempt_selector" aria-labelledby="dropdownMenu1">
          <li ng-repeat="attempt in current_paper_attempts" >
            <div ng-click="selectAttempt(attempt.id)" class="attempt_selector_item">
              {{getFormattedDate(attempt.starttime)}}
            </div>
          </li>
        </ul>
      </div>
      <div class="selected-attempt">{{selectedAttempt.attempt_date}}</div>
      <button class="btn btn-info" ng-click="viewSolutions()">Solutions</button>
    </div>
    <div>
      <div id="paper_information_area">
        <div id="paper_card" class="card">
          <h4 class="text-center text-uppercase"> {{selectedAttempt.paper_name}}</h4>
          <hr>
          <!--<p><b>Details: </b></p>-->
          <div id="paper_details">
            <div class="paper-detail"><span class="label label-default">Duration: {{selectedAttempt.duration}} hrs</span></div>
            <div class="paper-detail"><span class="label label-default">Attempted on: {{selectedAttempt.attempt_date}}</span></div>
            <div ng-if="current_paper_attempts.length == 1" class="paper-detail"><span class="label label-default">Attempted once</span></div>
            <div ng-if="current_paper_attempts.length > 1" class="paper-detail"><span class="label label-default">Attempted {{current_paper_attempts.length}} times</span></div>
            <div class="paper-detail"><span class="label label-default">Expires on: {{selectedAttempt.expiry_date}}</span></div>
          </div>
          <p><b>Marking scheme: </b></p>
          <div id="marking_scheme">
            <div class="mark-detail"><span class="label label-default">SC  + {{selectedPaper.sccor}} | {{selectedPaper.scnegmarks}}</span></div>
            <div class="mark-detail"><span class="label label-default">MC  + {{selectedPaper.mccor}} | {{selectedPaper.mcnegmarks}}</span></div>
            <div class="mark-detail"><span class="label label-default">AR  + {{selectedPaper.arcor}} | {{selectedPaper.arnegmarks}}</span></div>
            <div class="mark-detail"><span class="label label-default">CH  + {{selectedPaper.chcor}} | {{selectedPaper.chnegmarks}}</span></div>
            <div class="mark-detail"><span class="label label-default">SA  + {{selectedPaper.sacor}} | {{selectedPaper.sanegmarks}}</span></div>
            <div class="mark-detail"><span class="label label-default">TF  + {{selectedPaper.tfcor}} | {{selectedPaper.tfnegmarks}}</span></div>
            <div class="mark-detail"><span class="label label-default">SA  + {{selectedPaper.sacor}} | {{selectedPaper.sanegmarks}}</span></div>
          </div>
        </div>
        <div id="breakdown" class="card">
          <h5 class="text-center ">Subject Wise Breakdown: {{selectedAttempt.attempt_date}}</h5>
          <hr>
          <table class="table table-striped table-hover table-responsive">
            <thead>
              <th class="text-center">Sub</th>
              <th class="text-center">Correct</th>
              <th class="text-center">Incorrect</th>
              <!--<th class="text-center">Unattempted</th>-->
              <th class="text-center">Score</th>
            </thead>
            <tbody>
              <tr class="text-center">
                <td><b>Total</b></td>
                <td class="success"><b>{{selectedAttempt.netScore.correct}}</b></td>
                <td class="danger"><b>{{selectedAttempt.netScore.incorrect}}</b></td>
                <!--<td><b>ua</b></td>-->
                <td class="info"><b>{{selectedAttempt.result['marksobt']}}</b></td>
              </tr>
              <tr class="text-center" ng-repeat="sub in ['Physics','Chemistry','Maths','Biology','Zoology']">
                <td>{{ sub }}</td>
                <td class="success">{{ selectedAttempt.result[sub[0].toLowerCase()+'corr'] }}</td>
                <td class="danger">{{ selectedAttempt.result[sub[0].toLowerCase()+'wrong'] }}</td>
                <!--<td>{{ selectedAttempt.result[sub[0].toLowerCase()+'obt'] }} N/A</td>-->
                <td class="info"><b>{{ selectedAttempt.result[sub[0].toLowerCase()+'obt'] }}</b></td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
    </div>
  </div>
  <div id="chart_area">
    <div class="card" id="card_pie">
      <!--<h5>Mark distribution</h5>-->
      <canvas id="chart_pie" class="chart chart-pie" chart-data="pie.data" chart-labels="pie.labels" chart-options="pie.options">
      </canvas>
      <!--<div id="leg"></div>-->
    </div>
    <div class="card" id="card_bar" ng-if="! HIDEBARCHART">
      <!--<h5>Trend Over Time</h5>-->
      <canvas id="chart_bar" class="chart chart-bar" chart-data="bar.data" chart-labels="bar.labels" chart-series="bar.series"
        chart-options="bar.options">
      </canvas>
    </div>
    <!--<div id="analysis_area" class="card">
      <p><b><u>Comments</u></b><br></p>
      <ul>
        <li>
          <p>Love the performance, keep it up.</p>
        </li>
        <li>
          <p>Wouldn't hurt if you read a lil' HC Verma... just sayin'</p>
        </li>
      </ul>
    </div>-->
  </div>
</div>
