<div id="results_and_analysis_parent" ng-cloak>
  <div id="top_bar">
    <div id="test_paper_title">Results and Analysis</div>
    <div id="user_info">Ezio Auditore de Firenze</div>
    <button class="btn btn-danger" ng-click="goBack()"><span class="glyphicon glyphicon-log-out"> Back</span></button>
  </div>
  <!-- End info bar  -->
  <div id="result_area">
    <div id="result_area_controls">

      <div class="dropdown">
        <button class="btn btn-primary dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" aria-haspopup="true"aria-expanded="true">
          Select Attempt <span class="caret"></span>
        </button>
        <ul class="dropdown-menu" aria-labelledby="dropdownMenu1">
          <li ng-repeat="attempt in current_paper_attempts">
            <div ng-click="selectAttempt(attempt.id)" class="attempt_selector">
              {{attempt.starttime}}
            </div>
          </li>
        </ul>
      </div>


      <button class="btn btn-default" ng-click="debug()">debug</button>
      <button class="btn btn-info" ng-click="debug()">Answer Key</button>
      <button class="btn btn-success" ng-click="">Provide feedback!</button>
    </div>   
    <div>
      <div id="paper_information_area">

        <div id="paper_title" class="card">
          <h4 class="text-center text-primary">    {{selectedAttempt.paper_name}}</h4>
          <hr>
          <p><b>Details</b></p>
          <ul>
            <li>Duration: {{selectedAttempt.duration}} hrs</li>
            <li>Attempted {{current_paper_attempts.length}} times</li>
            <li>Expires on: {{selectedAttempt.expiry_date}}</li>
          </ul>
          <p><b>Marking scheme</b></p>
          <ul>
            <li>SC: +{{selectedPaper.sccor}}  /  -{{selectedPaper.scnegmarks}}</li>
            <li>MC: +{{selectedPaper.mccor}}  /  -{{selectedPaper.mcnegmarks}}</li>
            <li>AR: +{{selectedPaper.arcor}} / -{{selectedPaper.arnegmarks}}</li>
            <li>CH: +{{selectedPaper.chcor}} / -{{selectedPaper.chnegmarks}}</li>
            <li>SA: +{{selectedPaper.sacor}} / -{{selectedPaper.sanegmarks}}</li>
            <li>TF: +{{selectedPaper.tfcor}} / -{{selectedPaper.tfnegmarks}}</li>
            <li>SA: +{{selectedPaper.sacor}} / -{{selectedPaper.sanegmarks}}</li>
          </ul>
        </div>

        <div id="breakdown" class="card">
          <h5 class="text-center text-primary">Subject Wise Breakdown: {{selectedAttempt.attempt_date}}</h5>
          <hr>
          <table class="table table-striped table-hover">
            <thead>
              <th class="text-center">Sub</th>
              <th class="text-center">Correct Questions</th>
              <th class="text-center">Incorrect Questions</th>
              <th class="text-center">Unattempted Questions</th>
              <th class="text-center">Score</th>
            </thead>
            <tbody>
              <tr class="text-center" ng-repeat="sub in ['Physics','Chemistry','Maths','Biology','Zoology']">
                <td>{{ sub }}</td>
                <td class="success">{{ selectedAttempt.result[sub[0].toLowerCase()+'corr'] }}</td>
                <td class="danger">{{ selectedAttempt.result[sub[0].toLowerCase()+'wrong'] }}</td>
                <td>{{ selectedAttempt.result[sub[0].toLowerCase()+'obt'] }} N/A</td>
                <td class="info"><b>{{ selectedAttempt.result[sub[0].toLowerCase()+'obt'] }}</b></td>
              </tr>
            </tbody>
          </table>
        </div>

      </div>
    </div>
  </div>
  <div id="chart_area">
    <div class="card" id="pie_chart" >
      <h5>Mark distribution</h5>
      <canvas id="bar" class="chart chart-pie" chart-data="pie.data" chart-labels="pie.labels" chart-options="pie.options">
      </canvas>
      <div id="leg"></div>
    </div>
    <div class="card" id="chart" >
      <h5>Trend Over Time</h5>
      <canvas id="bar" class="chart chart-bar" chart-data="bar.data" chart-labels="bar.labels" chart-series="bar.series" chart-options="bar.options">
      </canvas>
    </div>
    <div id="analysis_area" class="card">
      <p><b><u>Comments</u></b><br></p>
      <ul>
        <li><p>Love the performance, keep it up.</p></li>
        <li><p>Wouldn't hurt if you read a lil' HC Verma... just sayin'</p></li>
      </ul>
    </div>
  </div>
</div>
