<div id="results_and_analysis_parent" ng-cloak>
  <div id="result_top_bar">
    <div>Results and Analysis</div>
    <div>Madhav Shiva Reddy</div>
    <button class="btn btn-danger" ng-click="goBack()"><span class="glyphicon glyphicon-log-out"> Back</span></button>
  </div>
  <!-- End info bar  -->
  <div id="result_area">
    <div id="result_area_controls">
      <div class="dropdown">
        <button class="btn btn-primary dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" aria-haspopup="true"aria-expanded="true">
          Select Attempt <span class="caret"></span>
        </button>
        <ul class="dropdown-menu" aria-labelledby="dropdownMenu1">
          <li ng-repeat="attempt in current_paper_attempts">
            <div ng-click="selectAttempt(attempt.id)" class="attempt_selector">
              {{attempt.starttime}}
            </div>
          </li>
        </ul>
      </div>
      <button class="btn btn-default" ng-click="debug()">debug</button>
      <button class="btn btn-info" ng-click="debug()">Answer Key</button>
      <button class="btn btn-success" ng-click="">Provide feedback!</button>
    </div>   
    <div>
      <div id="paper_information_area">

        <div id="paper_card" class="card">
          <h4 class="text-center text-primary">    {{selectedAttempt.paper_name}}</h4>
          <hr>
          <p><b>Details: </b></p>
          <div id="paper_details">
            <div class="paper-detail">Duration: {{selectedAttempt.duration}} hrs</div>
            <div class="paper-detail">Attempted {{current_paper_attempts.length}} times</div>
            <div class="paper-detail">Expires on: {{selectedAttempt.expiry_date}}</div>
          </div>
          <p><b>Marking scheme: </b></p>
          <div id="marking_scheme">
            <div class="mark-detail">SC: +{{selectedPaper.sccor}}  /  {{selectedPaper.scnegmarks}}</div>
            <div class="mark-detail">MC: +{{selectedPaper.mccor}}  /  {{selectedPaper.mcnegmarks}}</div>
            <div class="mark-detail">AR: +{{selectedPaper.arcor}} / {{selectedPaper.arnegmarks}}</div>
            <div class="mark-detail">CH: +{{selectedPaper.chcor}} / {{selectedPaper.chnegmarks}}</div>
            <div class="mark-detail">SA: +{{selectedPaper.sacor}} / {{selectedPaper.sanegmarks}}</div>
            <div class="mark-detail">TF: +{{selectedPaper.tfcor}} / {{selectedPaper.tfnegmarks}}</div>
            <div class="mark-detail">SA: +{{selectedPaper.sacor}} / {{selectedPaper.sanegmarks}}</div>
          </div>
        </div>

        <div id="breakdown" class="card">
          <h5 class="text-center text-primary">Subject Wise Breakdown: {{selectedAttempt.attempt_date}}</h5>
          <hr>
          <table class="table table-striped table-hover table-responsive">
            <thead>
              <th class="text-center">Sub</th>
              <th class="text-center">Correct</th>
              <th class="text-center">Incorrect</th>
              <th class="text-center">Unattempted</th>
              <th class="text-center">Score</th>
            </thead>
            <tbody>
              <tr class="text-center">
                <td><b>Total</b></td>
                <td class="success"><b>{{selectedAttempt.netScore.correct}}</b></td>
                <td class="danger"><b>{{selectedAttempt.netScore.incorrect}}</b></td>
                <td><b>ua</b></td>
                <td class="info"><b>{{selectedAttempt.result['marksobt']}}</b></td>
              </tr>
              <tr class="text-center" ng-repeat="sub in ['Physics','Chemistry','Maths','Biology','Zoology']">
                <td>{{ sub }}</td>
                <td class="success">{{ selectedAttempt.result[sub[0].toLowerCase()+'corr'] }}</td>
                <td class="danger">{{ selectedAttempt.result[sub[0].toLowerCase()+'wrong'] }}</td>
                <td>{{ selectedAttempt.result[sub[0].toLowerCase()+'obt'] }} N/A</td>
                <td class="info"><b>{{ selectedAttempt.result[sub[0].toLowerCase()+'obt'] }}</b></td>
              </tr>
            </tbody>
          </table>
        </div>

      </div>
    </div>
  </div>
  <div id="chart_area">
    <div class="card" id="chart_pie" >
      <!--<h5>Mark distribution</h5>-->
      <canvas id="canvas_pie" class="chart chart-pie" chart-data="pie.data" chart-labels="pie.labels" chart-options="pie.options">
      </canvas>
      <div id="leg"></div>
    </div>
    <div class="card" id="chart_bar" >
      <!--<h5>Trend Over Time</h5>-->
      <canvas id="canvas_bar" class="chart chart-bar" chart-data="bar.data" chart-labels="bar.labels" chart-series="bar.series" chart-options="bar.options">
      </canvas>
    </div>
    <div id="analysis_area" class="card">
      <p><b><u>Comments</u></b><br></p>
      <ul>
        <li><p>Love the performance, keep it up.</p></li>
        <li><p>Wouldn't hurt if you read a lil' HC Verma... just sayin'</p></li>
      </ul>
    </div>
  </div>
</div>
